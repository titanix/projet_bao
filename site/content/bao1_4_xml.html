<div id="content">
<div id='main' class="book">
    <h1>Modularisation du code</h1>
  <div>
  <h2>...</h2>

Extraction XML

<p>Le code a refactorisé de façon à utiliser une référence à une fonction pour l’extraction.
Ainsi, toute la partie concernant l’ouverture des fichiers, le parcours récursif du
répertoire et la création des fichiers de sortie n’est pas dupliquée.</p>

<p>Pour que cela fonctionne, il faut bien évidemment que les fonctions d’extractions
(basées sur des opérations sur les chaînes ou sur XML) aient la même interface : 
elles doivent prendre les mêmes arguments et renvoyer le même type de résultat.</p>

<p>C’est pourquoi le code originel de la fonction d’extraction par chaîne a été légèrement 
modifié : à l’origine il supprimait les balises les plus externes du contenu qu’il 
extrayait. Mais ce comportement ne permettait pas à la fonction d’extraction XML de 
fonctionner, puisque cela engendrait une erreur de parsing lorsqu’on l’appelait
successivement pour extraire le contenu d’un élément précédemment extrait, c’est à
dire en composant la fonction avec elle-même (par exemple extraire le titre d’un item).</p>

Extraction XPATH

<p>Bien que l’API XPATH soit relativement simple d’utilisation, une méthode d’extraction 
l’utilisant n’a pas été implémentée. En effet, j’ai déjà évoqué le fait que la méthode
d’extraction doit renvoyer une chaîne et doit pouvoir travailler en prenant comme
argument le retour d’un autre appel à elle-même.</p>

<p>Cependant, l’API ne permet de le faire (du moins pas raisonnablement facilement) 
car un appel à string_value va enlever tout les noms des nœuds enfants pour ne garder
que le texte visible. Si ce n’est pas un problème majeur lorsqu’il s’agit d’un élement
feuille, c’est très problématique pour travailler sur les nœuds item d’un flux RSS.</p>

<p>Je n’ai pas vu venir ce problème suffisamment tôt dans le développement, car j’ai 
l’habitude d’utiliser un framework dont le comportement était celui que j’attendais,
à savoir qu’un appel à une méthode type toString renvoie le contenu du nœud sous 
forme XML (cf. System.Xml.Linq.XNode.ToString).</p>


<div class="code-block">
<div class="code-block-header">
	<span style="font-weight:bold;"></bold>
</div>
<div class="code-block-content">

</div>
</div>



<div id="nav"><a href="">précédent</a> | 
<a href="">suivant</a></div></div>
</div>
</div>